!function(){"use strict";var e={930:function(e,t,i){var a=i(601),n=i.n(a),s=i(314),r=i.n(s)()(n());r.push([e.id,"#settings-from-profile tr.row-fluid{height:50px}",""]),t.A=r},314:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",a=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),a&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),a&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,a,n,s){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(r[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);a&&r[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},601:function(e){e.exports=function(e){return e[1]}},72:function(e){var t=[];function i(e){for(var i=-1,a=0;a<t.length;a++)if(t[a].identifier===e){i=a;break}return i}function a(e,a){for(var s={},r=[],o=0;o<e.length;o++){var l=e[o],d=a.base?l[0]+a.base:l[0],c=s[d]||0,p="".concat(d," ").concat(c);s[d]=c+1;var u=i(p),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(f);else{var m=n(f,a);a.byIndex=o,t.splice(o,0,{identifier:p,updater:m,references:1})}r.push(p)}return r}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var s=a(e=e||[],n=n||{});return function(e){e=e||[];for(var r=0;r<s.length;r++){var o=i(s[r]);t[o].references--}for(var l=a(e,n),d=0;d<s.length;d++){var c=i(s[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=l}}},659:function(e){var t={};e.exports=function(e,i){var a=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(i)}},540:function(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:function(e,t,i){e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},825:function(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var a="";i.supports&&(a+="@supports (".concat(i.supports,") {")),i.media&&(a+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(a+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),a+=i.css,n&&(a+="}"),i.media&&(a+="}"),i.supports&&(a+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:function(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function i(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={id:a,exports:{}};return e[a](s,s.exports,i),s.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.nc=void 0;var a={},n=i(72),s=i.n(n),r=i(825),o=i.n(r),l=i(659),d=i.n(l),c=i(56),p=i.n(c),u=i(540),f=i.n(u),m=i(113),v=i.n(m),b=i(930),y={};y.styleTagTransform=v(),y.setAttributes=p(),y.insert=d().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=f(),s()(b.A,y),b.A&&b.A.locals&&b.A.locals,$((function(){folderViewEnabled||disableFolders();const e=$("#displays").DataTable({language:dataTablesLanguage,dom:dataTablesTemplate,serverSide:!0,stateSave:!0,stateDuration:0,responsive:!0,stateLoadCallback:dataTableStateLoadCallback,stateSaveCallback:dataTableStateSaveCallback,filter:!1,searchDelay:3e3,order:[[1,"asc"]],ajax:{url:displaySearchURL,data:function(e){const t={};return t.draw=e.draw,t.length=e.length,t.start=e.start,t.order=e.order,t.columns=[],$.each(e.columns,(function(e,i){const a={};a.data=i.data,null!=i.name&&""!=i.name&&(a.name=i.name),t.columns.push(a)})),$.extend(t,$("#displays").closest(".XiboGrid").find(".FilterDiv form").serializeObject()),t}},createdRow:function(e,t,i){1===t.mediaInventoryStatus?$(e).addClass("table-success"):2===t.mediaInventoryStatus?$(e).addClass("table-danger"):$(e).addClass("table-warning")},columns:[{data:"displayId",responsivePriority:2},{data:"display",responsivePriority:2},{data:"displayType",responsivePriority:2},{data:"address",visible:!1,responsivePriority:5},{data:"mediaInventoryStatus",responsivePriority:2,render:function(e,t,i){if("display"!=t)return e;let a="";return a=1==e?"fa-check":2==e?"fa-times":"fa-cloud-download",'<span class="fa '+a+'" title="'+i.statusDescription+'"></span>'}},{data:"licensed",render:dataTableTickCrossColumn,responsivePriority:3},{data:"currentLayout",visible:!1,sortable:!1,responsivePriority:5},{data:"storageAvailableSpace",responsivePriority:5,visible:!1,render:function(e,t,i){return"display"!=t&&"export"!=t?e:i.storageAvailableSpaceFormatted}},{data:"storageTotalSpace",responsivePriority:5,visible:!1,render:function(e,t,i){return"display"!=t&&"export"!=t?e:i.storageTotalSpaceFormatted}},{data:"storagePercentage",visible:!1,sortable:!1,responsivePriority:5},{data:"description",visible:!1,responsivePriority:4},{data:"orientation",visible:!1,responsivePriority:6},{data:"resolution",visible:!1,responsivePriority:6},...taggingEnabled?[{name:"tags",responsivePriority:3,sortable:!1,visible:!1,data:dataTableCreateTags}]:[],{data:"defaultLayout",visible:!1,responsivePriority:4},{data:"incSchedule",render:dataTableTickCrossColumn,visible:!1,responsivePriority:5},{data:"emailAlert",render:dataTableTickCrossColumn,visible:!1,responsivePriority:5},{data:"loggedIn",render:dataTableTickCrossColumn,responsivePriority:3},{data:"lastAccessed",render:dataTableDateFromUnix,responsivePriority:4},{name:"displayProfileId",responsivePriority:5,data:function(e,t){return e.displayProfile},visible:!1},{name:"clientSort",responsivePriority:4,data:function(e){return"lg"===e.clientType&&(e.clientType="webOS"),e.clientType+" "+e.clientVersion+"-"+e.clientCode},visible:!1},{data:"clientCode",responsivePriority:3,render:function(e,t){return"display"!==t?e<playerVersionSupport?displayPageTrans.no:displayPageTrans.yes:"<span class='fa "+(e<playerVersionSupport?"fa-times":"fa-check")+"'></span>"},visible:!1},{data:"deviceName",visible:!1,responsivePriority:5},{data:"clientAddress",visible:!1,responsivePriority:6},{data:"macAddress",responsivePriority:5},{data:"timeZone",visible:!1,responsivePriority:5},{data:"languages",visible:!1,responsivePriority:5,render:function(e,t){if("display"!==t)return e;let i="";if(void 0!==typeof e&&null!=e){const t=e.split(",");i+='<div class="permissionsDiv">';for(let e=0;e<t.length;e++){const a=t[e];""!==a&&(i+='<li class="badge">'+a+"</span></li>")}i+="</div>"}return i}},{data:"latitude",visible:!1,responsivePriority:6},{data:"longitude",visible:!1,responsivePriority:6},{data:"screenShotRequested",render:dataTableTickCrossColumn,visible:!1,name:"screenShotRequested",responsivePriority:7},{name:"thumbnail",responsivePriority:4,orderable:!1,data:function(e,t){return"display"!=t?e.thumbnail:""!=e.thumbnail?'<a class="display-screenshot-container" data-toggle="lightbox" data-type="image" href="'+e.thumbnail+'"><img class="display-screenshot" src="'+e.thumbnail+'" data-display-id="'+e.displayId+'" data-type="'+e.clientType+'" data-client-code="'+e.clientCode+'" /></a>':""},visible:!1},{data:"isCmsTransferInProgress",render:dataTableTickCrossColumn,visible:!1,name:"isCmsTransferInProgress"},{name:"bandwidthLimit",responsivePriority:5,data:null,render:{_:"bandwidthLimit",display:"bandwidthLimitFormatted",sort:"bandwidthLimit"},visible:!1},{data:"lastCommandSuccess",responsivePriority:6,render:function(e,t,i){if("display"!=t)return e;let a="";return a=1==e?"fa-check":0==e?"fa-times":"fa-question","<span class='fa "+a+"'></span>"},visible:!1},{data:"xmrChannel",responsivePriority:6,render:function(e,t,i){if("export"===t)return null!==e&&""!==e?1:0;if("display"!=t)return e;let a="";return a=null!=e&&""!=e?"fa-check":"fa-times","<span class='fa "+a+"'></span>"},visible:!1},{data:"commercialLicence",name:"commercialLicence",responsivePriority:5,render:function(e,t,i){if("display"!=t)return e;let a="";return 3==e?"N/A":(1==e?a="fa-check":0==e?a="fa-times":2==e&&(a="fa-clock-o"),'<span class="fa '+a+'" title="'+i.commercialLicenceDescription+'"></span>')},visible:!1},{name:"remote",data:null,responsivePriority:4,render:function(e,t,i){if("display"===t){let e="<div class='remote-icons'>";return""!==SHOW_DISPLAY_AS_VNCLINK&&null!=i.clientAddress&&""!==i.clientAddress&&(e+='<a href="'+SHOW_DISPLAY_AS_VNCLINK.replace("%s",i.clientAddress)+'" title="'+displayPageTrans.VNCtoThisDisplay+'" target="'+SHOW_DISPLAY_AS_VNC_TGT+'"><i class="fa fa-eye"></i></a>'),""!==i.teamViewerLink&&(e+='<a href="'+i.teamViewerLink+'" title="'+displayPageTrans.TeamViewertoThisDisplay+'" target="_blank"><img src="'+publicPath+'theme/default/img/remote_icons/teamviewer.png" alt="TeamViewer Icon"></a>'),""!==i.webkeyLink&&(e+='<a href="'+i.webkeyLink+'" title="'+displayPageTrans.WebkeytoThisDisplay+'" target="_blank"><img src="'+publicPath+'theme/default/img/remote_icons/webkey.png" alt="Webkey Icon"></a>'),e+"</div>"}return"export"!==t?"":""!==i.teamViewerLink?"TeamViewer: "+i.teamViewerLink:""!==i.webkeyLink?"Webkey: "+i.webkeyLink:""===i.teamViewerLink&&""===i.webkeyLink?"":void 0},visible:!0,orderable:!1},{data:"groupsWithPermissions",visible:!1,responsivePriority:10,render:dataTableCreatePermissions},{data:"screenSize",visible:!1,responsivePriority:6},{data:"isMobile",render:dataTableTickCrossColumn,visible:!1,name:"isMobile"},{data:"isOutdoor",render:dataTableTickCrossColumn,visible:!1,name:"isOutdoor"},{data:"ref1",visible:!1,responsivePriority:6},{data:"ref2",visible:!1,responsivePriority:6},{data:"ref3",visible:!1,responsivePriority:6},{data:"ref4",visible:!1,responsivePriority:6},{data:"ref5",visible:!1,responsivePriority:6},{data:"customId",visible:!1,responsivePriority:6},{data:"costPerPlay",visible:!1,responsivePriority:6},{data:"impressionsPerPlay",visible:!1,responsivePriority:6},{data:"createdDt",visible:!1,responsivePriority:6},{data:"modifiedDt",visible:!1,responsivePriority:6},{data:"countFaults",name:"countFaults",responsivePriority:3,render:function(e,t,i){return i.clientCode<300?"":"display"!==t?e:e>0?'<span class="badge" style="background-color: red; color: white">'+i.countFaults+"</span>":""}},{data:"osVersion",visible:!1,responsivePriority:6},{data:"osSdk",visible:!1,responsivePriority:6},{data:"manufacturer",visible:!1,responsivePriority:6},{data:"brand",visible:!1,responsivePriority:6},{data:"model",visible:!1,responsivePriority:6},{orderable:!1,responsivePriority:1,data:dataTableButtonsColumn}]});let t;e.on("draw",(function(e,t){dataTableDraw(e,t,(function(){const t=$("#"+e.target.id),i=t.closest(".XiboGrid").find(".map-controller"),a=t.closest(".XiboGrid").find(".list-controller");i.length>0&&0==t.closest(".dataTables_wrapper").find(".dataTables_folder .map-controller").length&&(i.appendTo(".dataTables_folder"),i.removeClass("d-none").addClass("d-inline-flex")),a.length>0&&0==t.closest(".dataTables_wrapper").find(".dataTables_folder .list-controller").length&&(a.appendTo(".dataTables_folder"),a.removeClass("d-none").addClass("d-inline-flex"))}))})),e.on("draw",{form:$("#displays").closest(".XiboGrid").find(".FilterDiv form")},dataTableCreateTagEvents),e.on("processing.dt",dataTableProcessing),dataTableAddButtons(e,$("#displays_wrapper").find(".dataTables_buttons")),$("#refreshGrid").on("click",(function(){e.ajax.reload()}));let i,a=[];const n=$("#display-map"),s=$("#map_button"),r=$("#list_button"),o=n.parent(),l=$(".dataTables_folder");function d(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(i.clearLayers(),a=[]),n.is(":visible")&&($.ajax(n.data("displaysUrl"),{method:"GET",data:$(".XiboGrid").find(".XiboFilter form").serialize()+"&bounds="+e,success:function(e){if(e.features.length>0){const t=L.icon({iconUrl:publicPath+"dist/assets/map-marker-green-check.png",iconRetinaUrl:publicPath+"dist/assets/map-marker-green-check-2x.png",iconSize:[24,40],iconAnchor:[12,40]}),n=L.icon({iconUrl:publicPath+"dist/assets/map-marker-green-cross.png",iconRetinaUrl:publicPath+"dist/assets/map-marker-green-cross-2x.png",iconSize:[24,40],iconAnchor:[12,40]}),s=L.icon({iconUrl:publicPath+"dist/assets/map-marker-yellow-check.png",iconRetinaUrl:publicPath+"dist/assets/map-marker-yellow-check-2x.png",iconSize:[24,40],iconAnchor:[12,40]}),r=L.icon({iconUrl:publicPath+"dist/assets/map-marker-yellow-cross.png",iconRetinaUrl:publicPath+"dist/assets/map-marker-yellow-cross-2x.png",iconSize:[24,40],iconAnchor:[12,40]}),o=L.icon({iconUrl:publicPath+"dist/assets/map-marker-red-check.png",iconRetinaUrl:publicPath+"dist/assets/map-marker-red-check-2x.png",iconSize:[24,40],iconAnchor:[12,40]}),l=L.icon({iconUrl:publicPath+"dist/assets/map-marker-red-cross.png",iconRetinaUrl:publicPath+"dist/assets/map-marker-red-cross-2x.png",iconSize:[24,40],iconAnchor:[12,40]});L.geoJSON(e,{pointToLayer:function(e,d){const c={1:{true:t,false:n},3:{true:s,false:r},default:{true:o,false:l}},p=!!e.properties.loggedIn,u={icon:(c[e.properties.mediaInventoryStatus]||c.default)[p]};let f="<strong>"+e.properties.display+"</strong>";if(e.properties.orientation&&(f+='<br/><div style="width: 180px;"><span>Orientation: '+e.properties.orientation+"</span></div>"),e.properties.status&&(f+='<div style="width: 180px;"><span>Status: '+e.properties.status+"</span>",e.properties.loggedIn?f+="<span> (Logged in) </span></div>":f+="<span> (Not logged in) </span></div>"),e.properties.displayProfile&&(f+='<div style="width: 180px;"><span>Display profile: '+e.properties.displayProfile+"</span></div>"),e.properties.resolution&&(f+='<div style="width: 180px;"><span>Resolution: '+e.properties.resolution+"</span></div>"),e.properties.lastAccessed&&(f+='<div style="width: 180px;"><span>Last accessed: '+(moment(e.properties.lastAccessed,"X").tz?moment(e.properties.lastAccessed,"X").tz(timezone).format(jsDateFormat):moment(e.properties.lastAccessed,"X").format(jsDateFormat))+"</span></div>"),e.properties.thumbnail&&(f+='<div style="width: 180px;"><img class="display-screenshot" src="'+e.properties.thumbnail+'" /></div>'),!a.includes(e.properties.displayId)){a.push(e.properties.displayId);const t=L.marker(d,u);return t.mediaInventoryStatus=e.properties.mediaInventoryStatus,t.bindPopup(f).openPopup().addTo(i)}}})}}}),i.addTo(t),i.on("clustermouseover",(function(e){const i=e.layer.getAllChildMarkers();let a=0,n=0,s=0;i.forEach((function(e){switch(e.mediaInventoryStatus){case 1:a++;break;case 3:n++;break;default:s++}}));let r="<div><strong>Total number of displays</strong>";const o=[{count:a,text:"Up to date"},{count:n,text:"Out of date"},{count:s,text:"Downloading"}];for(const{count:e,text:t}of o)e>0&&(r+=`<div>${t}: ${e}</div>`);r+="</div>",L.popup().setLatLng(e.latlng).setContent(r).openOn(t)})).on("clustermouseout",(function(e){t.closePopup()})).on("clusterclick",(function(e){t.closePopup()})))}r.hide(),s.on("click",(function(){t?setTimeout((function(){d(t.getBounds().toBBoxString())}),500):function(){n.width(o.width()-10),n.height($(window).height()-100),t=L.map("display-map",{center:[mapConfig.setArea.lat,mapConfig.setArea.long],zoom:mapConfig.setArea.zoom,fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}});const e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(t);L.easyPrint({tileLayer:e,sizeModes:["Current","A4Landscape","A4Portrait"],filename:"Displays on Map",hideControlContainer:!0}).addTo(t),i=L.markerClusterGroup({maxClusterRadius:function(e){return e>9?20:80},iconCreateFunction:function(e){let t=0,i=0,a=0;const n=e.getAllChildMarkers();for(const e of n)switch(e.mediaInventoryStatus){case 1:t++;break;case 3:i++;break;default:a++}const s=c([t,i,a],["rgba(181, 226, 140, 0.9)","rgba(243, 194, 18, 0.9)","rgba(219, 70, 79, 0.9)"]);return L.divIcon({html:s,className:"",iconSize:L.point(40,40)})}});let a=t.getBounds().toBBoxString();t.on("moveend",_.debounce((function(){a=t.getBounds().toBBoxString();const e=n.is(":visible");d(a,!e)}),500)),t.on("resize",(function(){t.invalidateSize()})),d(a,!1),$(".XiboGrid").find(".XiboFilter form input").on("keyup",(function(){d(a)})),$(".XiboGrid").find(".XiboFilter form select").on("change",(function(){d(a)})),n.hide()}(),$(".map-legend").show(),n.show(),s.hide(),r.show(),l.siblings().hide(),l.parent().siblings().hide()})),r.on("click",(function(){$(".map-legend").hide(),n.hide(),r.hide(),s.show(),l.siblings().show(),l.parent().siblings().show()})),window.refreshDisplayMap=function(){t&&(n.is(":visible")?t.invalidateSize():t.setView(t.getCenter(),t.getZoom()))};const c=function(e,t){const i=e.reduce((function(e,t){return e+t})),a=e.map((function(e){return e/i})),n=$("<div></div>");n.css("width","30px"),n.css("height","30px"),n.css("border-radius","50%"),n.css("display","flex"),n.css("align-items","center"),n.css("justify-content","center");let s="conic-gradient(",r=0;return a.forEach((function(e,i){const a=t[i],n=100*r;r+=e,s+=a+" "+n+"%, "+a+" "+(n+100*e)+"%, "})),s+="white 0%)",n.css("background",s),n.css("box-shadow","5px 5px 10px rgba(0, 0, 0, 0.3)"),n.append('<div style="color: black; font-weight: bold;">'+i+"</div>"),$("<div />").append(n.clone()).html()}})),window.displayRequestScreenshotFormSubmit=function(){if($("#displayRequestScreenshotForm").submit(),XiboDialogClose(),1==showThumbnailColumn){const e=$("#displays").DataTable();e.column(["thumbnail:name"]).visible()||e.columns(["screenShotRequested:name","thumbnail:name"]).visible(!0)}},window.setDefaultMultiSelectFormOpen=function(e){console.debug("Multi-select form opened for default layout");const t=$('<select name="layoutId" class="form-control" data-search-url="'+layoutSearchURL+'" data-search-term="layout" data-search-term-tags="tags" data-id-property="layoutId" data-text-property="layout">');t.on("change",(function(t){console.debug("Setting commit data to "+$(t.currentTarget).val()),e.data().commitData={layoutId:$(t.currentTarget).val()}})),$(e).find(".modal-body").append(t),makePagedSelect(t,e)},window.displayFormLicenceCheckSubmit=function(e){$("table#displays").DataTable().column("commercialLicence:name").visible(!0),e.submit()},window.setMoveCmsMultiSelectFormOpen=function(e){console.debug("Multi-select form opened for move CMS");const t=$('<div class="col-sm-12 alert alert-info"><p>'+displayPageTrans.setMoveCmsMultiSelectFormOpen.message+"</p></div>");$(e).find(".modal-body").append(t);const i=$('<div class="form-group row"><label class="col-sm-2 control-label" for="newCmsAddress" accesskey="">New CMS Address</label><div class="col-sm-10"><input class="form-control" name="newCmsAddress" type="text" id="newCmsAddress" value=""><span class="help-block">'+displayPageTrans.newCmsAddressHelp+"</span></div></div>"),a=$('<div class="form-group row"><label class="col-sm-2 control-label" for="newCmsKey" accesskey="">New CMS Key</label><div class="col-sm-10"><input class="form-control" name="newCmsKey" type="text" id="newCmsKey" value=""><span class="help-block">'+displayPageTrans.newCmsKeyHelp+"</span></div></div>"),n=$('<div class="form-group row"><label class="col-sm-2 control-label" for="twoFactorCode" accesskey="">Two Factor Code</label><div class="col-sm-10"><input class="form-control" name="twoFactorCode" type="text" id="twoFactorCode" value=""><span class="help-block">'+displayPageTrans.twoFactorCodeHelp+"</span></div></div>");$(e).find(".modal-body").append(i,a,n),$("#twoFactorCode, #newCmsAddress, #newCmsKey").on("change",(function(){e.data().commitData={newCmsAddress:$("#newCmsAddress").val(),newCmsKey:$("#newCmsKey").val(),twoFactorCode:$("#twoFactorCode").val()}}))},window.makeVenueSelect=function(e){e.append(new Option("","0",!1,!1)),$.ajax({method:"GET",url:e.data("searchUrl"),dataType:"json",success:function(t){$.each(t.data,(function(t,i){const a=i.venueId===e.data("venueId");e.append(new Option(i.venueName,i.venueId,a,a))})),e.select2()},error:function(e){SystemMessage(e.message||displayPageTrans.unknownError,!1)}})},window.displayEditFormOpen=function(e){displayProfileFormOpen(),XiboInitialise("#settings-from-display-profile");const t=$(e).find("#settings-from-display-profile").find(".form-group"),i=$(e).find("#settings-from-profile tbody").empty(),a=$(e).data("extra"),n=$(e).find(".venue-select select.form-control");n.data("initialValue")?(n.data("initialised",!0),makeVenueSelect(n)):e.find('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){"#location"!==$(e.target).attr("href")||n.data("initialised")||(n.data("initialised",!0),makeVenueSelect(n))})),a.forEach((function(e,t){if(["lockOptions","pictureOptions","timers"].includes(e.name)){const t=JSON.parse(e.value);$.each(t,(function(e,t){"keylock"==e&&$.each(t,(function(e,t){"local"==e&&(e="keylockLocal"),"remote"==e&&(e="keylockRemote"),a.push({name:e,value:t})})),t=["boolean","number"].includes(typeof t)?t.toString():t,a.push({name:e,value:t})}))}if("elevateLogsUntil"===e.name){let i=null;moment(e.value,"X").isAfter(moment())&&(i=moment(e.value,"X").format(systemDateFormat)),a[t]={name:e.name,value:i}}}));const s=function(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!1,s=!1,o=!1,l=!1,d={},c=t.find("#"+i);0==c.length?t.find(".multiSelect").length>0&&(c=t.find('.multiSelect option:selected[value="'+i+'"]').parents(".form-group:first").find(".multiSelect, .multiSelectInputs"),c.each((function(e,t){$(t).find(".timePickerDisplayEditForm").length>0?(o=!0,$(t).find(".input-group.timerInit").removeClass("timerInit"),destroyDatePicker($(t).find(".timePickerDisplayEditForm:not(.datePickerHelper)"))):$(t).find(".pictureControlsSlider").length>0&&(l=!0,d=$(t).find(".pictureControlsSlider").bootstrapSlider("getAttribute"),$(t).find(".pictureControlsSlider").bootstrapSlider("destroy"))}))):1==c.length&&c.hasClass("dateControl")?(s=!0,destroyDatePicker(c),c=c.parent()):1==c.length&&c.hasClass("select2-hidden-accessible")&&(n=!0,c.select2("destroy"));const p=c;if(c=c.clone(!0),n&&p.addClass("select2-hidden-accessible"),$(e).html(c),s&&(forms.initFields(p.parents("form"),p.find(".dateControl")),forms.initFields($(e).parents("form"),$(e).find(".dateControl"))),o){timersFormInit(p),timersFormInit($(e));const t=c.parent();t.addClass("timerOverride"),t.find(".date-clear-button").remove(),t.append('<div class="text-muted">'+displayPageTrans.adjustTimesofTimer+"</div>")}if(l&&(p.find(".pictureControlsSlider").bootstrapSlider(d),c.find(".pictureControlsSlider").bootstrapSlider(d)),null!=a&&($(e).find(".multiSelectInputs .pictureControlsSlider").length>0?($.isNumeric(a)||$(e).find(".multiSelectInputs .slider-tick-label").each((function(e,t){if($(t).html()==a)return a=e,!1})),$(e).find(".pictureControlsSlider").bootstrapSlider("setValue",a)):"checkbox"==c.attr("type")?$(c).prop("checked",a):s?$(c).find("input").val(a):o?$.each(a,(function(e,t){"on"==e?$(c).find("input.timersOn").val(t):"off"==e&&$(c).find("input.timersOff").val(t)})):$(c).val(a)),n&&makePagedSelect(c),"screenDimensions"==i&&(setAndroidDimensions($(e)),$(e).find(".androidDimensionInput").removeClass("col-3").addClass("col-6")),$(e).find(".multiSelect").val(i).hide(),$(e).find(".multiSelectInputs").length>0){const t=Math.round(12/$(e).find(".multiSelectInputs").length);$(e).find(".multiSelectInputs").attr("class","multiSelectInputs col-sm-"+t)}$(e).attr("data-editing","true"),$(e).attr("data-input-name",i),$(e).unbind("click"),$(e).find(".slider").addClass("scaled-slider"),$(e).find(".pictureControlsSlider").bootstrapSlider("refresh",{useCurrentValue:!0});const u=$(e).parent("tr").find("td:first strong").attr("title");u&&$(e).append('<div class="text-muted">'+u+"</div>");const f=$('<button type="button" class="btn btn-outline-danger btn-sm pull-right button-close-override"><i class="fa fa-times"></i></button>').on("click",(function(t){t.stopPropagation(),r(e,i)}));$(e).append(f)},r=function(e,t){$(e).html('<button class="btn btn-block btn-outline-secondary" type="button"><i class="fa fa-edit"></i></button > '),$(e).off().on("click",(function(e){$(e.currentTarget).data("editing")||s($(e.currentTarget),t)})),$(e).attr("data-editing","false")};$.each(t,(function(e,t){const n=$(t).find("label"),r=$(t).find("input,select"),o=$(t).find("small.form-text.text-muted");let l=n.prop("for"),d="",c="";const p=o.length>0?o.text():"";if(["name","isDefault"].includes(l))return!0;if($(t).hasClass("form-group-timers"))l=$(t).find(".multiSelect").val(),c=$(t).find(".multiSelect option:selected").text(),d=$(t).find(".timersOn").val()+" - "+$(t).find(".timersOff").val();else if($(t).hasClass("form-group-picture-options")){l=$(t).find(".multiSelect").val(),c=$(t).find(".multiSelect option:selected").text();const e=[];$(t).find(".multiSelectInputs .slider-tick-label").each((function(t,i){e.push($(i).html())})),d=$(t).find(".multiSelectInputs .pictureControlsSlider").bootstrapSlider("getValue"),null!=e[d]&&(d=e[d])}else"checkbox"==r.attr("type")?(c=n.text(),d=r.is(":checked")):r.is("select")?(c=n.text(),d=r.find("option:selected").text()):"screenDimensions"===l?(c=n.text(),d=$(t).find("#screenDimensions").val()):(c=n.text(),d=r.val());if(""==l||null==l||null==l)return!0;const u=$('<tr><td style="width: 40%;"><strong title="'+p+'">'+c+'</strong></td><td style="width: 25%; overflow-x: auto; max-width: 250px;"><div>'+d+'</div></td><td class="override-input text-center" style="width: 35%;" data-editing="false" data-input-name="'+l+'"><button class="btn btn-block btn-outline-secondary" type="button"><i class="fa fa-edit"></i></button></td></tr>').appendTo(i),f=a.find((function(e){return e.name===l}));null!=f&&s(u.find(".override-input"),l,f.value)})),$(e).find('.override-input[data-editing="false"]').on("click",(function(e){const t=$(e.currentTarget).data("inputName");s($(e.currentTarget),t)})),$('a[data-toggle="tab"]').on("shown.bs.tab",(function(){$(".pictureControlsSlider").bootstrapSlider("refresh",{useCurrentValue:!0})})),XiboInitialise("#settings-from-profile")},window.displayEditFormSubmit=function(){const e=$("#displayEditForm"),t=e.find("input[name=bandwidthLimit]"),i=e.find("select[name=bandwidthLimitUnits]");let a=t.val();"mb"==i.val()?a*=1024:"gb"==i.val()&&(a=1024*a*1024),t.prop("value",a),e.submit((function(t){t.preventDefault(),e.find('input[type="checkbox"]').each((function(e,t){$(t).attr("disabled",!1)})),e.find("input.temp-input").each((function(e,t){$(t).remove()}))})),e.find('input[type="checkbox"]').each((function(e,t){const i=$(t).is(":checked")?"on":"off",a=$(t).attr("id");$('<input type="hidden" class="temp-input">').attr("id",a).attr("name",a).val(i).appendTo($(t).parent()),$(t).attr("disabled",!0)})),e.submit()},$("body").on("click",".display-screenshot",(function(e){const t=e.target.dataset.displayId,i=e.target.dataset.type,a=e.target.dataset.clientCode,n={};$.ajax({url:"/display/status/"+t,method:"GET",dataType:"json",success:function(e){null!=e&&(a<400&&("webOS"===i||"sssp"===i)&&(e.logMessagesArray=JSON.stringify(e.logMessagesArray),e.allLayouts=JSON.stringify(e.allLayouts),e.scheduledLayouts=JSON.stringify(e.scheduledLayouts),e.validLayouts=JSON.stringify(e.validLayouts),e.invalidLayouts=JSON.stringify(e.invalidLayouts),e.blacklistArray=JSON.stringify(e.blacklistArray),e.spaceTotal=formatBytes(e.spaceTotal,2),e.spaceFree=formatBytes(e.spaceFree,2),e.spaceUsed=formatBytes(e.spaceUsed,2)),n.data=e,n.type=i,$(".modal-body").append(templates.display.statusWindow({...n,trans:displayPageTrans})))}})}));var h=window;for(var g in a)h[g]=a[g];a.__esModule&&Object.defineProperty(h,"__esModule",{value:!0})}();