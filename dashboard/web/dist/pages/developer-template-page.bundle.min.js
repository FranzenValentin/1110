!function(){var e={};const a=$("#templates").DataTable({language:dataTablesLanguage,dom:dataTablesTemplate,serverSide:!0,stateSave:!0,stateDuration:0,responsive:!0,stateLoadCallback:dataTableStateLoadCallback,stateSaveCallback:dataTableStateSaveCallback,filter:!1,searchDelay:3e3,order:[[0,"asc"]],ajax:{url:developerTemplatesSearchURL,data:function(e){$.extend(e,$("#templates").closest(".XiboGrid").find(".FilterDiv form").serializeObject())}},columns:[{data:"id",responsivePriority:2},{data:"templateId",responsivePriority:2},{data:"dataType"},{data:"title",orderable:!1},{data:"type",orderable:!1},{data:"groupsWithPermissions",responsivePriority:3,render:dataTableCreatePermissions},{orderable:!1,responsivePriority:1,data:dataTableButtonsColumn}]});a.on("draw",dataTableDraw),a.on("processing.dt",dataTableProcessing),dataTableAddButtons(a,$("#templates_wrapper").find(".dataTables_buttons")),$("#refreshGrid").on("click",(function(){a.ajax.reload()})),$("#module-template-xml-import").on("click",(function(e){e.preventDefault(),openUploadForm({url:developerTemplatesImportURL,templateId:"template-module-xml-upload",uploadTemplateId:"template-module-xml-upload-files",title:developerTemplatePageTrans.importXML,initialisedBy:"module-templates-upload",buttons:{main:{label:developerTemplatePageTrans.done,className:"btn-primary btn-bb-main",callback:function(){a.ajax.reload(),XiboDialogClose()}}},templateOptions:{multi:!1,trans:developerTemplatePageTrans.templateOptions,upload:{validExt:"xml"}}})})),window.moduleTemplateAddFormOpen=function(e){const a=$(e).find("#form-module-template");$("#dataType",a).on("select2:select",(function(a){const t=$(a.currentTarget).select2("data")[0].id,l=$(e).find("#copyTemplateId"),r=moduleTemplateSearchURL.replace(":dataType",t);var o;l.data("searchUrl",r),(o=l).empty().trigger("change"),o.append(new Option("","",!1,!1)),$.ajax({method:"GET",url:o.data("searchUrl"),data:o.data("filterOptions"),dataType:"json",success:function(e){$.each(e.data,(function(e,a){o.append(new Option(a.title,a.templateId,!1,!1))})),o.select2({allowClear:!0,placeholder:{id:null,value:""}})},error:function(e){SystemMessage(e.message||developerTemplatePageTrans.unknownError,!1)}}),l.parent().parent().removeClass("d-none"),l.val(null).trigger("change")}))};var t=window;for(var l in e)t[l]=e[l];e.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})}();