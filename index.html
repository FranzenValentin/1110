<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Einsatzverwaltungssystem">
    <title>Einsatzverwaltung</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Einsatzverwaltung</h1>
    </header>
    <nav>
        <ul>
            <li><a href="#einsatz-form">Einsatz hinzufügen</a></li>
            <li><a href="#besatzung-form">Besatzung verwalten</a></li>
            <li><a href="#stichwort-form">Stichworte verwalten</a></li>
        </ul>
    </nav>
    <main>
        <!-- Einsatz hinzufügen -->
        <section id="einsatz-form">
            <h2>Neuen Einsatz hinzufügen</h2>
            <form action="einsatz_hinzufuegen.php" method="POST">
                <label for="einsatznummer">Einsatznummer LTS:</label>
                <input type="number" id="einsatznummer" name="einsatznummer" required>
                <br>

                <label for="stichwort">Stichwort:</label>
                <select id="stichwort" name="stichwort">
                    <?php
                    require 'db.php';
                    $stmt = $pdo->query("SELECT id, stichwort FROM Stichworte");
                    while ($row = $stmt->fetch()) {
                        echo "<option value='{$row['id']}'>{$row['stichwort']}</option>";
                    }
                    ?>
                </select>
                <br>

                <label for="alarmuhrzeit">Alarmuhrzeit:</label>
                <input type="datetime-local" id="alarmuhrzeit" name="alarmuhrzeit" required>
                <br>

                <label for="zurueckzeit">Zurückzeit:</label>
                <input type="datetime-local" id="zurueckzeit" name="zurueckzeit">
                <br>

                <label for="adresse">Adresse:</label>
                <input type="text" id="adresse" name="adresse" required>
                <br>

                <label for="fahrzeug">Fahrzeug:</label>
                <select id="fahrzeug" name="fahrzeug">
                    <?php
                    $stmt = $pdo->query("SELECT id, name FROM Fahrzeuge");
                    while ($row = $stmt->fetch()) {
                        echo "<option value='{$row['id']}'>{$row['name']}</option>";
                    }
                    ?>
                </select>
                <br>

                <button type="submit">Einsatz speichern</button>
            </form>
        </section>

        <!-- Besatzung verwalten -->
        <section id="besatzung-form">
            <h2>Besatzung verwalten</h2>
            <form action="besatzung_verwalten.php" method="POST">
                <?php
                $roles = ['stf' => 'Staffel-Führer (StF)', 'ma' => 'Maschinist (MA)', 'atf' => 'Atemschutz-Führer (AtF)',
                          'atm' => 'Atemschutz-Mann (AtM)', 'wtf' => 'Wachtrupp-Führer (WtF)', 'wtm' => 'Wachtrupp-Mann (WtM)', 'prakt' => 'Praktikant (Prakt)'];
                foreach ($roles as $key => $label) {
                    echo "<label for='$key'>$label:</label>";
                    echo "<select id='$key' name='$key'>";
                    $stmt = $pdo->query("SELECT id, CONCAT(vorname, ' ', nachname) AS name FROM Personal");
                    while ($row = $stmt->fetch()) {
                        echo "<option value='{$row['id']}'>{$row['name']}</option>";
                    }
                    echo "</select><br>";
                }
                ?>
                <button type="submit">Besatzung speichern</button>
            </form>
        </section>

        <!-- Stichworte verwalten -->
        <section id="stichwort-form">
            <h2>Stichworte verwalten</h2>
            <form action="stichwort_hinzufuegen.php" method="POST">
                <label for="kategorie">Kategorie:</label>
                <select id="kategorie" name="kategorie">
                    <option value="TH">Technische Hilfe (TH)</option>
                    <option value="BRAND">Brand</option>
                    <option value="RD">Rettungsdienst (RD)</option>
                </select>
                <br>

                <label for="stichwort">Stichwort:</label>
                <input type="text" id="stichwort" name="stichwort" required>
                <br>

                <button type="submit">Stichwort hinzufügen</button>
            </form>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Einsatzverwaltung. Alle Rechte vorbehalten.</p>
    </footer>
</body>
</html>
